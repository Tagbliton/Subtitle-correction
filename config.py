from openai import OpenAI


client = OpenAI(
    # 若没有配置环境变量，请用阿里云百炼API Key将下行替换为：api_key="sk-xxx",
    api_key="YOUR API KET",  # 如何获取API Key：https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key
    base_url="https://api.deepseek.com"
    # base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
)

def system_prompt(index, cut_lines):
    lines = int(index)*int(cut_lines)+1
    prompt = f'用户将提供一些视频字幕文本，序号从{lines}开始标注，校正其中明显的错别字，有些内容虽然表述错误但可能符合视频人物说出的话，修改其中明显的错别字，请解析为"before"和"after"并以json格式输出.'
    example = """
    示例输入: 
    183. 这个项目占不占自然岸线
    184. 基本上的分类的
    185. 一个一个
    186. 一个简单的一个现场认定标准啊
    187. 那么案线保有率的管控啊
    188. 这个国家对于我们自然案线的保有率
    189. 其实是有要求的啊
    190. 呃三审仪式啊
    191. 东海区的三审仪式呢
    192. 这个新修测案线的这个成果
    193. 已经进入经各个省市人民政府的批准
    194. 已经实施了
    195. 那么下阶段这个自然案线呢
    196. 也是海洋督查
    197. 呃这
    198. 个督查的一个重点啊
    
    
    EXAMPLE JSON OUTPUT:
    {
        "before": {
        183. 这个项目占不占自然岸线
        184. 基本上的分类的
        185. 一个一个
        186. 一个简单的一个现场认定标准啊
        187. 那么案线保有率的管控啊
        188. 这个国家对于我们自然案线的保有率
        189. 其实是有要求的啊
        190. 呃三审仪式啊
        191. 东海区的三审仪式呢
        192. 这个新修测案线的这个成果
        193. 已经进入经各个省市人民政府的批准
        194. 已经实施了
        195. 那么下阶段这个自然案线呢
        196. 也是海洋督查
        197. 呃这
        198. 个督查的一个重点啊},
        "after": {
        183. 这个项目占不占自然岸线
        184. 基本上的分类的
        185. 一个
        186. 一个简单的一个现场认定标准啊
        187. 那么岸线保有率的管控啊
        188. 这个国家对于我们自然岸线的保有率
        189. 其实是有要求的
        190. 三省一市啊
        191. 东海区的三省一市呢
        192. 这个新修测岸线的这个成果
        193. 已经进入经各个省市人民政府的批准
        194. 已经实施了
        195. 那么下阶段这个自然岸线呢
        196. 也是海洋督察
        197. 这个
        198. 督察的一个重点
    }
    """
    system_prompt = f"{prompt}{example}"

    return system_prompt
# role="""文本为srt字幕文件内容，校正其中明显的错别字，有些内容虽然表述错误但可能符合视频人物说出的话，仅仅修改其中明显的错别字，并在每一行文本前添加序号，将可能错误的地方进行总结好方便我修改。
# 输出示例：
# ### 错误总结（方便您修改）：
# 我修改了所有 ** 明显的错别字 ** （基于常见错误），但对表述错误或口语化内容（如重复、语法问题）未改动。以下是详细列表：
#
# #### **已校正的明显错别字**（共38处）：
# | 序号 | 原词 | 校正后 | 上下文示例 |
# | ------ | ------ | -------- | ------------ |
# | 48 | 建 | 检 | "总量也要去建" → 应为"检"（检查 / 检测） |
# | 49 | 废气物 | 废弃物 | "会产生那个废气物的" → 标准术语 |
# | 56 | 船子 | 船只 | "清除的船子" → 音近字错误 |
# | 90 | 桥梦 | 桥墩 | "这里桥梦有灌注的" → 形近字错误（"梦"→"墩"） |
# | 91 | 桥梦 | 桥墩 | 同上 |
# | 110 | 废气物 | 废弃物 | "它会产生那个废气物的" → 同上 |
# | 128 | 青岛 | 倾倒 | "青岛的设备" → 音近字错误（"青岛"→"倾倒"） |
# #### **未修改的可能错误**（符合人物口语或表述，但需您确认）：
# - **序号17-18、42等："正压层"**：可能是"正压层"（地质术语），但未改动，因人物可能口语化说错。
# - **序号28："要设置定"**：可能应为"要设定"或"要固定"，但保留口语表述。
# - **序号30："炸有个孔呢"**：口语化重复（"炸礁石炸"），未改动。
# - **序号103："外力转盘还是用水枪重提转盘"**：表述模糊（可能指设备类型），未改动。"""


